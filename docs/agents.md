# エージェント (サーバー側)

エージェントは、ユーザーのリクエストに応答してA2UIメッセージを生成するサーバー側のプログラムです。

メッセージがクライアントへ[転送(transported)](transports.md)された後、実際のコンポーネントのレンダリングは[レンダラー(renderer)](renderers.md)で行われます。エージェントは、A2UIメッセージを生成することだけを担当します。

## エージェントの仕組み

```
ユーザー入力 → エージェントロジック → LLM → A2UI JSON → クライアントへ送信
```

1. ユーザーメッセージの**受信**
2. LLM (Gemini, GPT, Claudeなど) を介した**処理**
3. 構造化された出力としてのA2UI JSONメッセージの**生成**
4. トランスポート層を介したクライアントへの**転送**

クライアントでのユーザーとの対話は、新しいユーザー入力として処理される場合があります。

## エージェントのサンプル

A2UIリポジトリには、参考にできるサンプルエージェントが含まれています：

- [Restaurant Finder](https://github.com/google/A2UI/tree/main/samples/agent/adk/restaurant_finder)
    - フォームを使用したテーブル予約
    - ADKを使用して作成
- [Contact Lookup](https://github.com/google/A2UI/tree/main/samples/agent/adk/contact_lookup)
    - 結果リストの検索
    - ADKを使用して作成
- [Rizzcharts](https://github.com/google/A2UI/tree/main/samples/agent/adk/rizzcharts)
    - A2UIカスタムコンポーネントデモ
    - ADKを使用して作成

## A2Aで使用されるエージェントの種類

### 1. ユーザー対面エージェント (スタンドアロン)

ユーザー対面エージェントは、ユーザーが直接対話するエージェントです。

### 2. リモートエージェントのホスト役となるユーザー対面エージェント

ユーザー対面エージェントが、1つ以上のリモートエージェントのホスト役を務めるパターンです。ユーザー対面エージェントがリモートエージェントを呼び出すと、リモートエージェントがA2UIメッセージを生成します。これは、クライアントエージェントがサーバーエージェントを呼び出す[A2A](https://a2a-protocol.org)プロトコルでよく見られるパターンです。

- ユーザー対面エージェントは、A2UIメッセージを修正せずに「そのままパススルー」できます。
- ユーザー対面エージェントは、メッセージをクライアントに送る前にA2UIメッセージを編集できます。

### 3. リモートエージェント

リモートエージェントは、ユーザー対面UIの直接の一部ではありません。代わりに、リモートエージェントとして登録され、ユーザー対面エージェントから呼び出されることがあります。これは、クライアントエージェントがサーバーエージェントを呼び出す[A2A](https://a2a-protocol.org)プロトコルでよく見られるパターンです。
